<!-- External Dependencies -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.26.0/cytoscape.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/cytoscape-qtip@2.7.0/cytoscape-qtip.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- BiomarkerFinder Styles -->
<link rel="stylesheet" href="https://biomarker-matchmaker.web.app/frontend/03-tool.css">

<!-- Main Content -->
<div class="app-wrapper">
  <header class="header">
    <div class="background-blob blob-1"></div>
    <div class="background-blob blob-2"></div>
    <div class="container">
      <div class="header-content">
        <h1 class="app-title">
          <span class="icon"><i class="fas fa-dna"></i></span>
          BiomarkerFinder
        </h1>
        <p class="app-description">
          Discover and explore the most relevant biomarkers for any disease - understand what they mean for diagnosis,
          prognosis, and targeted treatments.
        </p>
      </div>
    </div>
  </header>
  <div class="container">
    <div class="search-container fade-in">
      <div class="input-group">
        <div class="input-container">
          <input id="diseaseInput" type="text"
            placeholder="Type or speak a disease name or question..." autocomplete="off">
          <div id="autocomplete-list" class="autocomplete-suggestions"></div>
          <i class="input-icon fas fa-search"></i>
          <button id="micBtn" class="mic-btn" title="Use voice input">
            <i class="fas fa-microphone"></i>
          </button>
        </div>
        <select id="voiceSelector" class="voice-selector" title="Choose AI voice">
          <option value="21m00Tcm4TlvDq8ikWAM">Rachel (Warm Female)</option>
          <option value="pNInz6obpgDQGcFmaJgB">Adam (Deep Male)</option>
          <option value="EXAVITQu4vr4xnSDxMaL">Bella (Clear Female)</option>
          <option value="N2lVS1w4EtoT3dr4eOWO">Callum (British Male)</option>
        </select>
        <button id="getBiomarkersBtn">
          <span id="buttonText">Find Biomarkers</span>
          <span id="loadingSpinner" style="display: none;"><span class="loading-spinner"></span></span>
        </button>
      </div>
      <div class="recent-searches">
        <div class="recent-search-tag">Mantle cell lymphoma</div>
        <div class="recent-search-tag">Non-small cell lung cancer</div>
        <div class="recent-search-tag">Breast cancer</div>
        <div class="recent-search-tag">Colorectal cancer</div>
        <div class="recent-search-tag">Acute myeloid leukemia</div>
      </div>
    </div>

    <!-- Progress Indicator -->
    <div id="progressContainer" class="progress-container">
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill"></div>
      </div>
      <div class="progress-steps">
        <div class="progress-spinner"></div>
        <div id="progressText" class="progress-text">Processing your request...</div>
      </div>
    </div>

    <!-- Voice Summary Section -->
    <div id="voiceSummaryContainer" class="voice-summary-container" style="display: none;">
      <div class="voice-summary-header">
        <div class="voice-summary-title">
          <i class="fas fa-volume-up"></i>
          <span id="voiceSummaryDisease">AI Voice Summary</span>
        </div>
        <button id="copyVoiceSummary" class="voice-copy-btn" title="Copy summary to clipboard">
          <i class="far fa-copy"></i>
        </button>
      </div>
      <div class="voice-summary-content">
        <div id="voiceSummaryText" class="voice-summary-text"></div>
        <div class="voice-summary-audio">
          <audio id="voiceSummaryAudio" controls></audio>
        </div>
      </div>
    </div>

    <div class="output-container">
      <div id="output" class="biomarker-results">
        <div class="empty-state">
          <div class="empty-icon"><i class="fas fa-dna"></i></div>
          <h3 class="empty-title">Search for biomarkers</h3>
          <p class="empty-message">Enter a cancer type or disease name above to discover relevant biomarkers</p>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- BiomarkerFinder JavaScript -->
<script src="https://biomarker-matchmaker.web.app/frontend/03-tool.js"></script>
